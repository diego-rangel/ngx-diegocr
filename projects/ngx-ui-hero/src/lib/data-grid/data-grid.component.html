<div class="ui-hero-datagrid">
    <div [ngClass]="{'table-responsive': responsive}">
        <table [id]="tableId" class="table" [ngClass]="{
            'table-striped': striped,
            'table-bordered': bordered,
            'table-hover': hoverEffect,
            'table-animated': animated && initialRenderApplied && !resizing,
            'table-animating': animating && initialRenderApplied,
            'table-fixed': autoFitMode == 1 || autoFitMode == 2,
            'table-not-resizing': !resizing
        }">
            <thead>
                <tr>
                    <th class="text-center checkbox-column" *ngIf="showCheckboxColumn && gridData?.length > 0" style="width: 50px;">
                        <input type="checkbox" [(ngModel)]="selectAll" (change)="OnSelectAllChanged()" *ngIf="showSelectAllCheckbox" />
                    </th>
                    <th class="action text-center" *ngIf="showActionsColumn" [ngStyle]="{'width': actionsColumnWidth}">{{actionsColumnCaption}}</th>
                    <th *ngFor="let column of columns; let i = index;" 
                        (click)="ToogleSorting(column)" 
                        class="column {{column.captionClasses}}" 
                        [draggable]="false"
                        [ngStyle]="{'width': column.width}" 
                        [ngClass]="{
                            'sortable': column.sortable,
                            'sorting': column.sort?.sorting,
                            'asc': column.sort?.sortDirection == 'asc',
                            'desc': column.sort?.sortDirection == 'desc'
                        }">
                        <div class="d-flex justify-content-between align-items-center">                            
                            <div class="flex-grow-1" [ngClass]="{'text-center': column.captionAlignment == 1, 'text-right': column.captionAlignment == 2}" [draggable]="allowColumnReorder && !resizing">
                                {{column.caption}}
                            </div>
                            <i class="fa fa-sort ml-1" *ngIf="column.sortable && !column.sort?.sorting"></i>
                            <i class="fa fa-sort-amount-asc ml-1" *ngIf="column.sortable && column.sort?.sorting && column.sort?.sortDirection == 'asc'"></i>
                            <i class="fa fa-sort-amount-desc ml-1" *ngIf="column.sortable && column.sort?.sorting && column.sort?.sortDirection == 'desc'"></i>
                        </div>
                        <div class="resizer" *ngIf="allowColumnResize"></div>
                    </th>
                </tr>
            </thead>
            <tbody *ngIf="sortApplied">
                <tr *ngFor="let row of gridData; let rowIndex = index;">
                    <td class="text-center checkbox-column" *ngIf="showCheckboxColumn && gridData?.length > 0">
                        <input type="checkbox" [(ngModel)]="row.selected" (change)="OnRowSelectedChanged(row)" />
                    </td>
                    <td class="action text-center" *ngIf="showActionsColumn">
                        <ng-container 
                            [ngTemplateOutlet]="actionsColumnTemplate"
                            [ngTemplateOutletContext]="{
                                row: row,
                                rowIndex: rowIndex
                            }">
                        </ng-container>
                    </td>
                    <td *ngFor="let column of columns; let columnIndex = index;" class="{{column.dataClasses}}" [ngClass]="{
                        'text-center': column.dataAlignment == 1,
                        'text-right': column.dataAlignment == 2
                    }">                        
                        <span *ngIf="!column.render && column.data?.split('.').length == 1" [tooltip]="column.enableTooltip ? row[column.data] : ''">{{row[column.data]}}</span>
                        <span *ngIf="!column.render && column.data?.split('.').length > 1" [tooltip]="column.enableTooltip ? RenderPropertyValue(column.data, row) : ''">{{RenderPropertyValue(column.data, row)}}</span>
                        <span *ngIf="column.render" [innerHtml]="column.render(row, row[column.data], rowIndex)"></span>
                    </td>
                </tr>
                <tr *ngIf="showSummaries && HasSummarizableColumns()" class="summaries">
                    <td *ngIf="showCheckboxColumn && gridData?.length > 0"></td>
                    <td *ngIf="showActionsColumn"></td>
                    <td *ngFor="let column of columns; let columnIndex = index;" class="{{column.dataClasses}}" [ngClass]="{
                        'text-center': column.dataAlignment == 1,
                        'text-right': column.dataAlignment == 2
                    }">                        
                        <span *ngIf="column.summarizable">{{column.summaryPrefix}}{{RenderColumnSummary(column) | number:'1.2-2'}}</span>
                    </td>
                </tr>
            </tbody>
            <tfoot *ngIf="sortApplied && (!gridData || gridData.length == 0)">
                <tr>
                    <td class="empty-results text-center p-3" [attr.colspan]="columns?.length + (showActionsColumn ? 1 : 0) + (showCheckboxColumn && gridData?.length > 0 ? 1 : 0)">
                        <p class="mb-0">{{emptyResultsMessage}}</p>
                    </td>
                </tr>
            </tfoot>
        </table>

        <div class="loading-box" *ngIf="!sortApplied">
            <spinner></spinner>
        </div>
    </div>

    <div class="d-flex justify-content-between align-items-center flex-wrap mt-3"  *ngIf="showInfos && gridData?.length > 0">
        <div class="export-actions mr-3 mb-0" *ngIf="allowExports">
            <div class="btn-group" dropdown>
                <button dropdownToggle type="button" class="btn btn-primary dropdown-toggle">
                    <i class="fa fa-external-link"></i> {{exportButtonLabel}} <span class="caret"></span>
                </button>
                <ul *dropdownMenu class="dropdown-menu" role="menu">
                    <li role="menuitem"><a class="dropdown-item" href="#" (click)="ExportToExcel()"><i class="fa fa-file-excel-o"></i> Excel</a></li>
                </ul>
            </div>
        </div>
        <div class="info">
            <span>{{GetInfo()}}</span>
        </div>
        <div class="pagination ml-auto">
            <pagination #paginator
                [(ngModel)]="currentPage"
                [totalItems]="totalItems"
                [itemsPerPage]="itemsPerPage"
                [boundaryLinks]="boundaryLinks"
                [directionLinks]="directionLinks"
                [maxSize]="maxSize"
                [rotate]="rotate"
                [firstText]="firstText"
                [lastText]="lastText"
                [nextText]="nextText"
                [previousText]="previousText"
                (pageChanged)="PageChanged($event)">
            </pagination>
        </div>
    </div>   
</div>
